<!doctype html>
<html>
<head>
<title>ai-one nathan</title>

<script src="//www.google.com/jsapi" type="text/javascript"></script>
<script>
  google.load('search', '1',
      {language : 'en'/*, style : google.loader.themes.GREENSKY*/});
</script>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<style>
/* Solarized Dark 
 
For use with Jekyll and Pygments
 
http://ethanschoonover.com/solarized
 
SOLARIZED HEX      ROLE
--------- -------- ------------------------------------------
base03    #002b36  background
base01    #586e75  comments / secondary content
base1     #93a1a1  body text / default code / primary content
orange    #cb4b16  constants
red       #dc322f  regex, special keywords
blue      #268bd2  reserved keywords
cyan      #2aa198  strings, numbers
green     #859900  operators, other keywords


// The solarized palette

$base03 =  #002b36
$base02 =  #073642
$base01 =  #586e75
$base00 =  #657b83
$base0 =   #839496
$base1 =   #93a1a1
$base2 =   #eee8d5
$base3 =   #fdf6e3

$yellow =  #b58900 
$orange =  #cb4b16 
$red =     #dc322f 
$magenta = #d33682 
$violet =  #6c71c4 
$blue =    #268bd2 
$cyan =    #2aa198 
$green =   #859900 

if $solarized is dark
  $fg =      $base0
  $bg =      $base03
  $hl =      $base02
  $emph =    $base1
  $comment = $base01
else
  $fg =      $base00
  $bg =      $base3
  $hl =      $base2
  $emph =    $base01
  $comment = $base1
*/
body {margin: 0; padding: 0;}
#control {background-color: #fdf6e3; padding: 10px; color: #657b83;}
body {background-color: #002b36; color: #93a1a1;}
body, ul, input, button, label, select, textarea {font-size: 14px; font-family: "Open Sans";}
input, textarea {background-color: #eee8d5; color: #657b83; border: 1px solid #657b83}
button {background-color: #073642;color: #fdf6e3; border-radius: 2px; border: 1px solid #fdf6e3;}
#resultsPane {margin: 10px;}
#result ul {margin: 0; padding: 0;}
#result li { display: block; float: left; margin: 2px}
#result li label { display:block; height: 40px; width: 150px; background-color: #073642; padding-top: 20px; padding-left: 10px; color: #fdf6e3; border-radius: 2px; font-size: 12.5px;}
#result li label:hover{ background-color: #586e75;}
#resultsPane {display:none;}
</style>
</head>
<body>
<div id="control">
<div>
<textarea id="text" name="text" rows="1" cols="80"></textarea>
<button style="vertical-align: top" id="btnText">Go</button>
</div>
<div>
<label for="corpus">corpus:</label>
<select id="corpus" name="corpus">
  <option value="brown">brown</option>
  <option value="reuters-flat">reuters-flat</option>
  <option value="reuters-deep">reuters-deep</option>
  <option value="none">none</option>
</select>
<label for="limit">number of keywords:</label>
<select id="limit" name="limit">
  <option value="5">5</option>
  <option value="10" selected="selected">10</option>
  <option value="25">25</option>
  <option value="50">50</option>
</select>
<label class="checkbox"><input id="preserve_entities" type="checkbox" />preserve entities</label>
</div>
</div>
<div>
<div id="resultsPane">
    <button id="btn-sel-all">select all</button>
    <button id="btn-sel-none">select none</button>
<ul id="result">
</ul>
<div style="clear:both"></div>
</div>
</div>
<div id="searchpane" style="display:none; margin-top: 20px; clear:both; background-color: white; padding: 10px">
        <script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box-form-id&inputbox=cse-search-input-box-id"></script>
    <button style="display: none" id="btnSearch">Refresh</button>
    <div id="search">Loading....</div>
</div>
<script language="javascript">
var customSearchControl = null;
function keywords_for_url() 
{
    $("#result").html('<li style="font-style:italic;list-style-type: none;">looking for keywords, just for you...</li>');
    url = $('#url').val();
    if (!url.match(/^[a-zA-Z]+:\/\//)) {
        url = 'http://' + url;
    }
    $("#searchpane").hide();
    $("#resultsPane").show();
    customSearchControl.clearAllResults();
    $.get( "http://192.168.2.3:5000/fingerprint/" + url,
        {
            "preserve_entities": $('#preserve_entities').is(':checked'),
            "corpus": $('#corpus').val(),
            "limit": $('#limit').val()
        },
        function(data) {
            $("#result").html(data);
            $("#searchpane").show();
            doSearch();
        }
    );
}

function keywords_for_text() 
{
    $("#result").html('<li style="font-style:italic;list-style-type: none;">looking for keywords, just for you...</li>');
    $("#searchpane").hide();
    $("#resultsPane").show();
    customSearchControl.clearAllResults();
    $.ajax({
        type : "POST",
        url: "http://192.168.2.3:5000/fingerprint2",
        contentType: "application/json",
        data: JSON.stringify ({
            preserve_entities: $('#preserve_entities').is(':checked'),
            corpus: $('#corpus').val(),
            limit: parseInt($('#limit').val()),
            associations_per_keyword: 0,
            query: $('#text').val()
        }),
        success: function(data) {
            $("#result").html(data);
            $("#searchpane").show();
            doSearch();
        }
    });
}

function doSearch() 
{
    var query = $("#result input:checked").map(function() {
        return $(this).val();
    }).get().join(" ");
   customSearchControl.execute(query);
}

$(document).ready(function() {
    $("#result").click(function() {
        doSearch();
    });
    
    $('#text').focus(function () {
        $(this).animate({ height: "8em" }, 100, function() {
            $(this).select();
            $(this).onmouseup = function() {
                $(this).onmouseup = null;
                return false;
            };
        });
    });
    
    $('#text').focusout(function () {
        $(this).animate({ height: "1.3em" }, 100);
    });
    
    $("#text").keypress(function(event){
        if ( event.which == 13 && !event.shiftKey ) {
            event.preventDefault();
            $("#btnText").focus();
            keywords_for_text();
        }
    }); 
    
    $("#btn-sel-all").click(function(){
         var query = $("#result input").each(function() {
             return $(this).prop('checked', true);
         });
    });
    
    $("#btn-sel-none").click(function(){
         var query = $("#result input").each(function() {
             return $(this).prop('checked', false);
         });
    });
    
    $("#btnSearch").click(function(){
        doSearch();
    });
    //001217825978792069499:qahmj4i8nkq
    google.setOnLoadCallback(function() {
        customSearchControl = new google.search.CustomSearchControl(
            '001217825978792069499:kfy6816p2cw');
        var options = new google.search.DrawOptions();
        options.enableSearchResultsOnly();
        customSearchControl.draw('search', options);
      }, true);
    
    $("#btnTest").click(function(){
        keywords_for_url();
    });
    $("#btnText").click(function(){
        keywords_for_text();
    });

});

</script>
</body>
</html>